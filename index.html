
<html>

<script src="https://creative-otter-tmmhku-dev-ed.trailblaze.my.site.com/lightning/lightning.out.js"></script>
<div data-lightning-out="true"></div>

<script>
    const appName= 'c:HelloWorldDependency';
    const componentName = 'c:helloWorld';
    const lightningEndpoint = 'https://creative-otter-tmmhku-dev-ed.trailblaze.my.site.com';
    const targetElement = document.querySelector("[data-lightning-out]");
    const componentAttributes = {};
    
    function getAuthToken() {
        var url = 'https://login.salesforce.com/oauth2/callback?grant_type=client_credentials'
        var post = {
            'method': 'POST',
            'headers': {
                'Content-Type': 'application/json; charset=utf-8',
                'Authorization' : 'client_id:3MVG9HB6vm3GZZR9sIPMXbCsv33sKF.5BA6v2f5HkTAayVxntAHz5xOiWaIl.aZPR5hEFQ0Uq9qLxtCPrsW4U, client_secret:887110D46348954A2257D7802C057CC9419ECFE4E8F18EFF0358251EEC8C816B'
            },
            'redirect': 'follow'
        };
        return UrlFetchApp.fetch(url, post);
    }
    
    var token = getAuthToken();
    let renderLightningOutComponent = (oauthResult) => {
    const token = oauthResult.accessToken;
    const lightningendpointuri = "https://creative-otter-tmmhku-dev-ed.trailblaze.lightning.force.com";
    $Lightning.use(appName, () => {
        $Lightning.createComponent(componentName, {}, targetElement, (cmp) => { console.log('component created') });},
                   lightningendpointuri, token);
    }
  
</script>

</html>
